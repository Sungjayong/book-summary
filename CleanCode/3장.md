# 3장. 함수
FitNesse : 웹 서버, 위키 및 소프트웨어 자동 테스트 도구
위키 : 웹 브라우저에서 간단한 마크업 언어를 이용해 공동 문서를 작성할 수 있고, 여러 사용자들이 협업을 통해 직접 내용과 구조를 수정할 수 있는 웹 페이지의 모음
- 의도를 분명히 표현하는 함수를 어떻게 구현할 수 있을까?
- 함수에 어떤 속성을 부여해야 처음 읽는 사람이 프로그램 내부를 직관적으로 파악할 수 있을까?

#### 작게 만들어라!
- 중첩 구조가 생길만큼 함수가 커져서는 안된다.

#### 한 가지만 해라!
- 함수는 한 가지를 해야 한다. 그 한 가지를 잘 해야 한다. 그 한 가지만을 해야 한다.
- 의미 있는 이름으로 다른 함수를 추출할 수 있다면 그 함수는 여러 작업을 하는 것!

#### 함수 당 추상화 수준은 하나로!
- 함수가 확실히 '한 가지' 작업만 하려면 함수 내 모든 문장의 추상화 수준이 동일해야 한다.
~~~java
getHtml() //추상화 수준 높음!
String pagePathName = PathParser.render(pagepath) // 추상화 수준 중간!
append() // 추상화 수준 아주 낮음!
~~~
- 한 함수 내에 추상화 수준을 섞으면 코드를 읽는 사람이 헷갈린다.
- 위에서 아래로 코드 읽기: '내려가기 규칙'
  - 코드는 위에서 아래로 이야기처럼 읽혀야 좋다.
  - 함수 추상화 수준이 한 번에 한 단계씩 낮아진다.

#### 서술적인 이름을 사용하라!
- 길고 서술적인 이름이 짧고 어려운 이름보다 좋다.
- 길고 서술적인 이름이 길고 서술적인 주석보다 좋다.

#### Switch 문
- switch 문은 작게 만들기 어렵다.
- 각 switch 문을 저차원 클래스에 숨기고 절대로 반복하지 않는 방법? 다형성 이용!
다형성(polymorphism) : 다양한 자료형(type)에 속하는 것이 허가되는 성질. 여러 형태를 받아드릴 수 있는 성질.
SRP(Single Responsibility Principle) : 클래스가 변경될 이유는 하나여야 한다.
> 참고 : https://wookgu.tistory.com/28
OCP(Open Closed Principle) : 개방 폐쇄의 원칙. 확장에 대해서는 개방적이어야하지만, 변경에 대해서는 폐쇄적이어야 한다. 즉, 기존의 코드를 변경하지 않으면서 기능을 추가할 수 있도록 설계되어야한다.
> 참고 : https://dublin-java.tistory.com/48
추상팩토리(Abstract Factory) : 서로 관련 있는 객체들을 통째로 묶어 팩토리 클래스로 만들고, 이들 팩토리를 조건에 따라 생성하도록 다시 팩토리를 만들어서 객체를 생성하는 패턴

#### 서술적인 이름을 사용하라!
- 길고 서술적인 이름이 길고 서술적인 주석보다 좋다.
- 서술적인 이름을 사용하면 개발자 머릿속에서도 설계가 뚜렸해지므로 코드를 개선하기 쉬워진다.

#### 함수 인수
- 함수에서 이상적인 인수 개수는 0개다.
- 테스트 관점에서도 인수는 더 어렵다 => 갖가지 인수 조합으로 함수를 검증하는 테스트 케이스

#### 부수 효과를 일으키지 마라!
- 시간적인 결합이나 순서 종속성을 초래한다.
시간적인 결합(temporal coupling)?
순서 종속성(order dependency)?
- 일반적으로 출력 인수는 피하자.

#### 명령과 조회를 분리하라!
- 함수는 뭔가를 수행하거나 뭔가에 답하거나 둘 중 하나만 해야 한다.
- 객체 상태를 변경하거나, 갱체 정보를 반환하거나 둘 중 하나여야 한다.
~~~java
  if(attributeExists("username")) {
    setAttribute("username", "bob");
    ...
  }
~~~

#### 오류 코드보다 예외를 사용하라!
- 오류 코드 대신 예외를 사용하면 오류 처리 코드가 원래 코드에서 분리되므로 코드가 깔끔해진다.
- 오류를 처리하는 함수는 오류만 처리해야 마땅하다.

#### 반복하지 마라!
- 중복을 없애면 가독성이 크게 높아진다.
- 구조적 프로그래밍, AOP, COP 모두 어떤 면에서 중복 제거 전략이다.

#### 구조적 프로그래밍
- 함수는 return 문이 하나여야한다.
- break나 continue를 사용해선 안 되며 goto는 절대로, 절대로 안 된다.

#### 함수를 어떻게 짜죠?
- 여느 글짓기와 비슷하다.
- 처음부터 탁짜내지 않는다.

#### 결론
- 모든 시스템은 특정 응용 분야 시스템을 기술할 목적으로 프로그래머가 설계한 도메인 특화 언어로 만들어진다.
- 함수는 그 언어에서 동사며, 클래스는 명사다.